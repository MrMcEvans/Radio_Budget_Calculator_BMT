<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Radio Budget Calculator</title>
  <style>
    body { font-family: sans-serif; padding: 2rem; max-width: 700px; margin: auto; }
    label, select, input { display: block; margin-bottom: 10px; width: 100%; }
    button { padding: 10px 15px; margin-top: 10px; }
    .result, .saved { margin-top: 20px; font-weight: bold; }
    .saved-list { font-weight: normal; }
    hr { margin: 1rem 0; }
  </style>
</head>
<body>

  <h2>Radio Budget Calculator</h2>

  <label for="station">Station:</label>
  <select id="station" onchange="updateDayparts()">
    <option value="Q94">Q94</option>
    <option value="KAYD">KAYD</option>
    <option value="Magic">Magic 102.5</option>
  </select>

  <label for="daypart">Daypart:</label>
  <select id="daypart"></select>

  <label for="length">Spot Length:</label>
  <select id="length">
    <option value="60">:60</option>
    <option value="30">:30</option>
    <option value="15">:15</option>
  </select>

  <label for="spots">Number of Spots:</label>
  <input type="number" id="spots" value="10" min="1">

  <button onclick="calculate()">Calculate</button>
  <button onclick="saveResult()">Save</button>

  <div class="result" id="output"></div>
  <div class="saved" id="savedList"></div>
  <div class="result" id="grandTotal"></div>

  <script>
    const rates = {
      Q94: {
        "M-F 6A-10A": { "60": 35, "30": 28, "15": 18 },
        "M-F 10A-3P": { "60": 32, "30": 26, "15": 16 },
        "M-F 3P-7P": { "60": 35, "30": 28, "15": 18 },
        "M-F 7P-12M": { "60": 15, "30": 12, "15": 8 },
        "M-F 12A-6A": { "60": 8, "30": 6, "15": 4 },
        "M-F 6A-7P": { "60": 32, "30": 26, "15": 16 },
        "M-F 5A-8P": { "60": 35, "30": 28, "15": 18 },
        "M-F 5A-12M": { "60": 32, "30": 26, "15": 16 },
        "SA-SU 12A-6A": { "60": 5, "30": 4, "15": 3 },
        "SA-SU 10A-3P": { "60": 25, "30": 20, "15": 13 },
        "SA 6A-7P": { "60": 20, "30": 16, "15": 10 },
        "SA 7P-12M": { "60": 12, "30": 10, "15": 6 },
        "SU 6A-7P": { "60": 20, "30": 16, "15": 10 },
        "SU 7P-12M": { "60": 12, "30": 10, "15": 6 }
      },
      KAYD: {
        "M-F 6A-10A": { "60": 27, "30": 22, "15": 14 },
        "M-F 10A-3P": { "60": 25, "30": 20, "15": 13 },
        "M-F 3P-7P": { "60": 27, "30": 22, "15": 14 },
        "M-F 7P-12M": { "60": 15, "30": 12, "15": 8 },
        "M-F 12A-6A": { "60": 8, "30": 6, "15": 4 },
        "M-F 6A-7P": { "60": 26, "30": 21, "15": 13 },
        "M-F 5A-8P": { "60": 23, "30": 18, "15": 12 },
        "M-F 5A-12M": { "60": 18, "30": 14, "15": 9 },
        "SA-SU 12A-6A": { "60": 12, "30": 10, "15": 6 },
        "SA-SU 10A-3P": { "60": 20, "30": 16, "15": 10 },
        "SA 6A-7P": { "60": 11, "30": 9, "15": 6 },
        "SA 7P-12M": { "60": 8, "30": 6, "15": 4 },
        "SU 6A-7P": { "60": 11, "30": 9, "15": 6 },
        "SU 7P-12M": { "60": 8, "30": 6, "15": 4 }
      },
      Magic: {
        "M-F 6A-10A": { "60": 55, "30": 44, "15": 28 },
        "M-F 10A-3P": { "60": 50, "30": 40, "15": 25 },
        "M-F 3P-7P": { "60": 50, "30": 40, "15": 25 },
        "M-F 7P-12M": { "60": 35, "30": 28, "15": 18 },
        "M-F 12A-6A": { "60": 8, "30": 6, "15": 4 },
        "M-F 6A-7P": { "60": 50, "30": 40, "15": 25 },
        "M-F 5A-8P": { "60": 50, "30": 40, "15": 25 },
        "M-F 5A-12M": { "60": 35, "30": 28, "15": 18 },
        "SA-SU 12A-6A": { "60": 8, "30": 6, "15": 4 },
        "SA-SU 10A-3P": { "60": 40, "30": 32, "15": 20 },
        "SA 6A-7P": { "60": 35, "30": 28, "15": 18 },
        "SA 7P-12M": { "60": 25, "30": 20, "15": 13 },
        "SU 6A-7P": { "60": 30, "30": 24, "15": 15 },
        "SU 7P-12M": { "60": 20, "30": 16, "15": 10 }
      }
    };

    let saved = [];

    function updateDayparts() {
      const station = document.getElementById("station").value;
      const daypartSelect = document.getElementById("daypart");
      daypartSelect.innerHTML = '';
      for (let dp in rates[station]) {
        const opt = document.createElement("option");
        opt.value = dp;
        opt.textContent = dp;
        daypartSelect.appendChild(opt);
      }
    }

    function calculate() {
      const station = document.getElementById("station").value;
      const daypart = document.getElementById("daypart").value;
      const length = document.getElementById("length").value;
      const spots = parseInt(document.getElementById("spots").value);
      const baseRate = rates[station][daypart][length];

      const spotCost = baseRate * spots;
      const streaming = 1 * spots;

      // KAYD includes streaming in their 10% streaming fee
      const adsyncBase = (station === "KAYD") ? spotCost + streaming : spotCost;
      const adsync = 0.10 * adsyncBase;
      const total = spotCost + streaming + adsync;

      const result = `
        Station: ${station} <br>
        Daypart: ${daypart} <br>
        Spot Rate: $${baseRate} <br>
        Spots: ${spots} <br>
        Spot Cost: $${spotCost.toFixed(2)} <br>
        Streaming ($1 each): $${streaming.toFixed(2)} <br>
        AdSync (10%): $${adsync.toFixed(2)} <br>
        <strong>Total: $${total.toFixed(2)}</strong>
      `;

      document.getElementById("output").innerHTML = result;
      return { station, daypart, length, spots, total };
    }

    function saveResult() {
      const { station, total } = calculate();
      saved.push(total);
      loadSaved();
    }

    function loadSaved() {
      const savedList = document.getElementById("savedList");
      savedList.innerHTML = saved.map((amt, i) => `#${i+1}: $${amt.toFixed(2)}`).join("<br>");
      const grand = saved.reduce((a, b) => a + b, 0);
      document.getElementById("grandTotal").innerHTML = `<hr><strong>Total Budget: $${grand.toFixed(2)}</strong>`;
    }

    window.onload = updateDayparts;
  </script>
</body>
</html>
